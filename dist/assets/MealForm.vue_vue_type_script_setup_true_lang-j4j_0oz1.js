import{_ as y,o as m,a as c,b as V,d as h,r as T,p as D,F as b,h as I,t as $,q as S,s as w,e as u,w as f,c as k,f as g,g as C,i as A,v as F}from"./index-0hC6koWy.js";import{l as v,T as x,_ as L,P as U}from"./lodash-B1BGLLys.js";import{a as B,S as j,u as z}from"./meal-mQO0s3eC.js";import{I as E}from"./IconDelete-LFG5QSfx.js";const M={},P={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","aria-hidden":"true"},R=V("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"},null,-1),Q=[R];function G(l,e){return m(),c("svg",P,Q)}const de=y(M,[["render",G]]),H=["value"],J=["value"],K=h({__name:"SelectInput",props:{options:{default:null},modelValue:{default:""}},emits:["update:modelValue"],setup(l,{expose:e,emit:r}){const n=r,s=T(null),p=t=>{var o;n("update:modelValue",(o=t.target)==null?void 0:o.value)};return D(()=>{s.value&&s.value.hasAttribute("autofocus")&&s.value.focus()}),e({focus:()=>{s.value&&s.value.focus()}}),(t,o)=>(m(),c("select",{ref_key:"select",ref:s,class:"p-2.5 pr-10 rounded bg-classes text-classes border-classes transition-classes",value:t.modelValue,onChange:p},[(m(!0),c(b,null,I(t.options,(d,a)=>(m(),c("option",{key:a,value:a},$(d),9,J))),128))],40,H))}}),W=y(K,[["__scopeId","data-v-c8220ecd"]]);var q=(l=>(l.pc="pc",l.kg="kg",l.g="g",l.tsp="tsp",l.tbsp="tbsp",l.oz="oz",l.cup="cup",l))(q||{});const X=l=>v.chain(l).omitBy(v.isNumber).value(),Y={class:"flex gap-2"},Z=h({__name:"IngredientForm",props:{modelValue:{}},emits:["remove","update:modelValue"],setup(l,{emit:e}){const r=l,n=S({id:"",name:"",quantity:0,unit:""}),s=e,p={"":"Select",...X(q)};return w(()=>r.modelValue,t=>{n.id=(t==null?void 0:t.id)??"",n.name=(t==null?void 0:t.name)??"",n.quantity=(t==null?void 0:t.quantity)??"",n.unit=(t==null?void 0:t.unit)??""},{immediate:!0}),w(n,t=>{s("update:modelValue",t)},{deep:!0}),(t,o)=>(m(),c("form",Y,[u(x,{type:"number",modelValue:n.quantity,"onUpdate:modelValue":o[0]||(o[0]=d=>n.quantity=d),placeholder:"Qty",class:"w-full"},null,8,["modelValue"]),u(W,{modelValue:n.unit,"onUpdate:modelValue":o[1]||(o[1]=d=>n.unit=d),options:p,class:"w-full"},null,8,["modelValue"]),u(x,{type:"text",modelValue:n.name,"onUpdate:modelValue":o[2]||(o[2]=d=>n.name=d),placeholder:"Name",class:"w-full"},null,8,["modelValue"]),u(B,{onClick:o[3]||(o[3]=d=>s("remove"))},{default:f(()=>[u(E)]),_:1})]))}}),O={class:"flex items-center justify-between mb-2"},ee={class:"space-y-2"},te=h({__name:"Ingredients",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:e}){const r=l,n=k({get(){return r.modelValue},set(o){s("update:modelValue",o)}}),s=e,p=()=>{n.value.push({id:new Date().getTime().toString(),name:"",quantity:0,unit:""})},t=o=>{n.value.splice(o,1)};return(o,d)=>(m(),c("div",null,[V("div",O,[u(j,null,{title:f(()=>[g(" Ingredients: ")]),_:1}),u(B,{onClick:C(p,["prevent"])},{default:f(()=>[g("Add Ingredient")]),_:1},8,["onClick"])]),V("div",ee,[(m(!0),c(b,null,I(n.value,(a,i)=>(m(),A(Z,{key:i,modelValue:n.value[i],"onUpdate:modelValue":_=>n.value[i]=_,ingredient:a,onRemove:_=>t(i)},null,8,["modelValue","onUpdate:modelValue","ingredient","onRemove"]))),128))])]))}}),ne=["onSubmit"],oe={class:"flex-1 overflow-auto p-2"},ue=h({__name:"MealForm",props:{id:{}},setup(l){var t,o,d;const e=l,r=z(),n=k(()=>v.cloneDeep(r.meals.find(a=>(a==null?void 0:a.id)===(e==null?void 0:e.id)))),s=S({id:e!=null&&e.id?((t=n.value)==null?void 0:t.id)||"":new Date().getTime().toString(),name:e!=null&&e.id&&((o=n.value)==null?void 0:o.name)||"",ingredients:e!=null&&e.id?((d=n.value)==null?void 0:d.ingredients)||[]:[]}),p=()=>{if(s.name){if(e!=null&&e.id){const a=r.meals.findIndex(i=>(i==null?void 0:i.id)===(e==null?void 0:e.id));a!==-1&&r.meals.splice(a,1,s)}else r.meals.push(s);F.push({name:"meals"})}};return(a,i)=>(m(),c("form",{onSubmit:C(p,["prevent"]),class:"flex flex-col"},[u(L,{id:"name"},{label:f(()=>[g("Meal Name")]),default:f(({id:_})=>[u(x,{id:_,type:"text",modelValue:s.name,"onUpdate:modelValue":i[0]||(i[0]=N=>s.name=N),placeholder:"Chicken"},null,8,["id","modelValue"])]),_:1}),V("div",oe,[u(te,{modelValue:s.ingredients,"onUpdate:modelValue":i[1]||(i[1]=_=>s.ingredients=_)},null,8,["modelValue"])]),u(U,{type:"submit",class:"w-full mt-auto"},{default:f(()=>[g($(a.id?"Update":"Create")+" Meal ",1)]),_:1})],40,ne))}});export{de as I,ue as _};
